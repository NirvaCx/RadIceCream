###############################################
#  Programa de exemplo para Syscall MIDI      #
#  ISC Abr 2018				      #
#  Marcus Vinicius Lamar		      #
###############################################

.data
# Numero de Notas a tocar
NUM: 260 # old: .word 13
# lista de nota,duração,nota,duração,nota,duração,...
NOTAS: 28, 135, 28, 135, 40, 135, 28, 135, 28, 135, 39, 135, 28, 135, 28, 135, 37, 135, 28, 135, 28, 135, 34, 135, 28, 135, 28, 135, 35, 135, 37, 135, 28, 135, 28, 135, 40, 135, 28, 135, 28, 135, 39, 135, 28, 135, 28, 135, 37, 135, 28, 135, 28, 135, 35, 677, 28, 135, 28, 135, 40, 135, 28, 135, 28, 135, 39, 135, 28, 135, 28, 135, 37, 135, 28, 135, 28, 135, 34, 135, 28, 135, 28, 135, 35, 135, 37, 135, 28, 135, 28, 135, 40, 135, 28, 135, 28, 135, 39, 135, 28, 135, 28, 135, 59, 67, 56, 67, 52, 67, 56, 67, 59, 67, 56, 67, 59, 67, 64, 67, 59, 67, 56, 67, 59, 67, 56, 67, 59, 67, 64, 67, 68, 67, 71, 67, 33, 135, 33, 135, 45, 135, 33, 135, 33, 135, 44, 135, 33, 135, 33, 135, 42, 135, 33, 135, 33, 135, 41, 135, 33, 135, 33, 135, 40, 135, 42, 135, 33, 135, 33, 135, 45, 135, 33, 135, 33, 135, 44, 135, 33, 135, 33, 135, 42, 135, 33, 135, 33, 135, 41, 677, 33, 135, 33, 135, 45, 135, 33, 135, 33, 135, 44, 135, 33, 135, 33, 135, 42, 135, 33, 135, 33, 135, 41, 135, 33, 135, 33, 135, 40, 135, 42, 135, 33, 135, 33, 135, 45, 135, 33, 135, 33, 135, 44, 135, 33, 135, 33, 135, 57, 67, 53, 67, 52, 67, 57, 67, 52, 67, 49, 67, 52, 67, 57, 67, 61, 67, 57, 67, 52, 67, 57, 67, 52, 67, 57, 67, 52, 67, 49, 67, 28, 135, 28, 135, 40, 135, 28, 135, 28, 135, 39, 135, 28, 135, 28, 135, 37, 135, 28, 135, 28, 135, 34, 135, 28, 135, 28, 135, 35, 135, 37, 135, 28, 135, 28, 135, 40, 135, 28, 135, 28, 135, 39, 135, 28, 135, 28, 135, 37, 135, 28, 135, 28, 135, 34, 677, 28, 135, 28, 135, 40, 135, 28, 135, 28, 135, 39, 135, 28, 135, 28, 135, 37, 135, 28, 135, 28, 135, 34, 135, 28, 135, 28, 135, 35, 135, 37, 135, 28, 135, 28, 135, 40, 135, 28, 135, 28, 135, 39, 135, 28, 135, 28, 135, 37, 135, 28, 135, 28, 135, 34, 677, 38, 135, 38, 135, 50, 135, 38, 135, 38, 135, 47, 135, 38, 135, 38, 135, 45, 135, 38, 135, 38, 135, 44, 135, 38, 135, 38, 135, 44, 135, 45, 135, 35, 135, 35, 135, 47, 135, 35, 135, 35, 135, 45, 135, 35, 135, 35, 135, 44, 135, 33, 135, 33, 135, 42, 677, 28, 135, 28, 135, 40, 135, 28, 135, 28, 135, 39, 135, 28, 135, 28, 135, 37, 135, 28, 135, 28, 135, 34, 135, 28, 135, 28, 135, 35, 135, 37, 135, 28, 135, 28, 135, 40, 135, 28, 135, 28, 135, 39, 135, 28, 135, 28, 135, 56, 67, 59, 67, 52, 67, 47, 67, 56, 67, 52, 67, 59, 67, 56, 67, 59, 67, 56, 67, 52, 67, 47, 67, 56, 67, 59, 67, 64, 67, 68, 67 # old: 69,500,76,500,74,500,76,500,79,600, 76,1000,0,1200,69,500,76,500,74,500,76,500,81,600,76,1000

.text
	la s0,NUM		# define o endereço do número de notas
	lw s1,0(s0)		# le o numero de notas
	la s0,NOTAS		# define o endereço das notas
	li t0,0			# zera o contador de notas
	li a2,30		# define o instrumento
	li a3,127		# define o volume

LOOP:	beq t0,s1, FIM		# contador chegou no final? então  vá para FIM
	lw a0,0(s0)		# le o valor da nota
	lw a1,4(s0)		# le a duracao da nota
	li a7,31		# define a chamada de syscall
	ecall			# toca a nota
	mv a0,a1		# passa a duração da nota para a pausa
	li a7,32		# define a chamada de syscal 
	ecall			# realiza uma pausa de a0 ms
	addi s0,s0,8		# incrementa para o endereço da próxima nota
	addi t0,t0,1		# incrementa o contador de notas
	j LOOP			# volta ao loop
	
FIM:	# li a0,40		# define a nota
	# li a1,1500		# define a duração da nota em ms
	# li a2,127		# define o instrumento
	# li a3,127		# define o volume
	# li a7,33		# define o syscall
	# ecall			# toca a nota
	
	li a7,10		# define o syscall Exit
	ecall			# exit

